import{u as P}from"./useSetMinMainHeight-2fead187.js";import{d as B,m as D,s as M,r as w,o as N,g as m,a as b,c as x,j as o,F as j,b as t,h as r,i as c,l as n,t as F,p as T,v as q,D as z,u as U,S as y,H as A,I as G,_ as J}from"./index-bcaa0858.js";import{u as K}from"./instructor-f129cc3c.js";const l=i=>(A("data-v-b034b14b"),i=i(),G(),i),O={class:"flex items-stretch bg-neutral-100"},Q={class:"w-72 bg-primary-1"},W={class:"p-6 pt-2"},X=l(()=>t("i",{class:"material-icons me-1 text-xs"},"arrow_back_ios_new",-1)),Y={class:"text-lg font-bold text-neutral-800"},Z={class:"border-t p-6"},tt={class:"mb-8"},et=l(()=>t("span",{class:"text-sm text-neutral-600"},"內容",-1)),st={class:"mb-8"},ot=l(()=>t("span",{class:"text-sm text-neutral-600"},"學員",-1)),at={class:"mb-8"},rt=l(()=>t("span",{class:"text-sm text-neutral-600"},"設定",-1)),ct=l(()=>t("span",{class:"text-sm text-neutral-600"},"發布",-1)),nt=l(()=>t("span",{class:""},"課程發布",-1)),lt=["checked"],ut={class:"main-content flex-1 bg-neutral-100 p-8"},it={key:1,class:"p-5"},dt=B({__name:"CourseLayoutView",setup(i){const{showError:p}=q(),{updateLoading:v}=D(),g=K(),{getCourse:I,getCourses:f,coursePublish:S,courseUnpublish:C}=g,{course:s,courses:R}=M(g),k=z(),V=U(),d=w(!1),_=w(0);P(),N(()=>{v(!0),I({id:+k.params.courseId}).catch(a=>{p(a).then(()=>{V.push("/instructor/courses")})}).finally(()=>{v(!1)}),h()});function h(){_.value=parseInt(k.params.courseId),f().then(()=>{R.value.forEach(a=>{a.id==_.value&&(d.value=a.isPublish)})})}function L(a){a.preventDefault(),d.value?C({courseId:_.value}).then(e=>{e.data.status==!0&&(f(),h(),y.fire({icon:"success",title:e.data.message}))}).catch(e=>{p(e)}):S({courseId:_.value}).then(e=>{e.data.status==!0&&(f(),h(),y.fire({icon:"success",title:e.data.message}))}).catch(e=>{p(e)})}return(a,e)=>{const H=m("RouterLink"),u=m("router-link"),$=m("RouterView");return b(),x("main",O,[o(s)?(b(),x(j,{key:0},[t("aside",Q,[t("div",W,[r(H,{to:"/instructor/courses",class:"mb-4 flex items-center text-xs text-neutral-600"},{default:c(()=>[X,n("課程列表")]),_:1}),t("h2",Y,F(o(s)&&o(s).title),1)]),t("ul",Z,[t("li",tt,[et,r(u,{to:`/instructor/course/${o(s).id}`,class:"block"},{default:c(()=>[n("章節管理")]),_:1},8,["to"])]),t("li",st,[ot,r(u,{to:`/instructor/course/${o(s).id}/students`,class:"mb-8 block"},{default:c(()=>[n("學員列表")]),_:1},8,["to"])]),t("li",at,[rt,r(u,{to:`/instructor/course/${o(s).id}/info`,class:"mb-1 block"},{default:c(()=>[n("課程資訊")]),_:1},8,["to"]),r(u,{to:`/instructor/course/${o(s).id}/faq`,class:"mb-1 block"},{default:c(()=>[n("常見問題")]),_:1},8,["to"]),r(u,{to:`/instructor/course/${o(s).id}/setting`,class:"block"},{default:c(()=>[n("進階設定")]),_:1},8,["to"])]),t("li",null,[ct,t("label",{class:"relative mb-1 flex items-center justify-between",onClick:e[0]||(e[0]=E=>L(E))},[nt,t("input",{type:"checkbox",name:"",id:"",class:"peer sr-only",checked:d.value},null,8,lt),t("div",{class:T(["relative h-6 w-11 items-center rounded-full bg-neutral-400 after:absolute after:left-0.5 after:top-0.5 after:h-5 after:w-5 after:rounded-full after:bg-neutral-50 after:transition-all after:content-[''] peer-focus:ring-4 peer-focus:ring-primary-3",{"peer-checked:bg-primary-6 peer-checked:after:translate-x-full":d.value}])},null,2)])])])]),t("div",ut,[r($)])],64)):(b(),x("div",it,"此課程不存在"))])}}});const ht=J(dt,[["__scopeId","data-v-b034b14b"]]);export{ht as default};
