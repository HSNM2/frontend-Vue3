import{d as D,m as F,f as G,s as L,r as h,w as H,o as J,g as K,a as o,c as l,b as s,F as d,n as u,p as m,e as O,t,h as Q,i as U,q as W,j as $,k as X,v as Y}from"./index-efb9783c.js";import{u as Z}from"./tag-ed087e92.js";import{G as I,g as ss}from"./userCourse-fee34b4e.js";import"./user-845fb886.js";const es={class:"container my-20"},ts=s("h2",{class:"mt-6 text-heading-3xl font-bold text-primary-5"},"探索課程",-1),as={class:"w-100 flex justify-end"},os=O('<span class="mx-2 rounded-md bg-primary-2 px-0.5">蛋捲</span><span class="mx-2 rounded-md bg-primary-2 px-0.5">雪酪</span><span class="mx-2 rounded-md bg-primary-2 px-0.5">餅乾</span><span class="mx-2 rounded-md bg-primary-2 px-0.5">冰品</span><span class="mx-2 rounded-md bg-primary-2 px-0.5">鬆餅</span>',5),ls={class:"border-2 border-solid border-neutral-200 outline-none"},rs=["value"],ns={class:"my-12"},is={class:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4"},cs=["onClick"],ds={class:"cursor-pointer hover:shadow hover:shadow-md hover:shadow-neutral-150"},us={class:"overflow-hidden"},ps=["src"],_s={class:"h-56 border border-t-0 border-solid border-neutral-150 p-3"},vs={class:"flex h-full flex-col justify-between"},hs={class:"line-clamp-2 text-lg font-bold text-primary-6"},ms={class:"text-sm text-neutral-800"},xs={class:"flex items-center"},gs=s("span",{class:"material-icons pr-2 text-base"}," watch_later ",-1),fs={class:"text-sm text-neutral-800"},bs={class:"flex items-center"},ys=s("span",{class:"material-icons pr-2 text-base"}," person ",-1),ks={class:"text-sm text-neutral-800"},ws={class:"flex items-center justify-between"},Cs={class:"flex items-center"},Ts={class:"text-sm text-neutral-600"},Ls={class:"flex items-center gap-x-2"},$s={class:"text-2xl font-bold text-primary-4"},Ps={key:0,class:"text-sm font-bold text-neutral-400 line-through"},Ss={class:"grid grid-cols-12"},js={class:"col-span-4 col-start-5 m-auto flex items-center"},Ns={class:"flex cursor-pointer items-center"},Ms=["onClick"],Es=D({__name:"CoursesView",setup(Vs){const{showError:P}=Y(),S=F(),{updateLoading:x}=S,j=G(),{authModal:N,authModalType:M,user:p}=L(j),_=h(p.value!==null),g=Z(),{tagList:V}=L(g),{getTagList:R,handleCourseTag:q,judgeTags:A}=g,B=[{value:"",label:"全部課程"},{value:"rate",label:"最高評價"},{value:"people",label:"最多人數"},{value:"price",label:"最低價格"}],i=h({page:1,totalPages:1,success:!1,data:[]}),r=h(1),f=()=>{x(!0);let a=20,n=`page=${r.value}&limit=${a}`;I(n).then(c=>{i.value=c.data}).catch(c=>{P(c)}),setTimeout(()=>{x(!1)},500)};function E(a="login"){N.value=!0,M.value=a}const z=a=>{_.value===!1?E():q(a)},v=a=>{a<=0||a>=i.value.totalPages||(r.value=a,f())},b=()=>{p.value!==null?(_.value=!0,R()):(_.value=!1,V.value=[])};return H(p,()=>{b()}),J(()=>{f(),b()}),(a,n)=>{var y,k,w;const c=K("router-link");return o(),l("main",null,[s("div",es,[ts,s("div",as,[os,s("select",ls,[(o(),l(d,null,u(B,e=>s("option",{key:e.value,value:e.value},t(e.label),9,rs)),64))])]),s("div",ns,[s("div",is,[(o(!0),l(d,null,u((y=i.value)==null?void 0:y.data,e=>(o(),l("div",{key:e.id,class:"relative"},[Q(c,{to:`/course/${e.id}`},{default:U(()=>[s("span",{class:"material-icons absolute right-2 top-2 z-10 cursor-pointer text-2xl text-primary-3",onClick:W(C=>z(e.id),["prevent"])},t($(A)(e.id)?"bookmark":"bookmark_border"),9,cs),s("div",ds,[s("div",us,[s("img",{class:"block h-48 w-full object-cover duration-150 hover:scale-110",src:e.image_path,alt:""},null,8,ps)]),s("div",_s,[s("div",vs,[s("h3",hs,t(e.title),1),s("div",null,[s("span",ms,t(e.provider),1),s("div",xs,[gs,s("span",fs,t(e.totalTime),1)]),s("div",bs,[ys,s("span",ks,t(e.buyers),1)]),s("div",ws,[s("div",Cs,[(o(),l(d,null,u(5,(C,T)=>s("span",{key:T,class:"material-icons text-lg text-primary-3"},t($(ss)(e.rating.avgRating,T)),1)),64)),s("span",Ts,t(`(${e.rating.countRating})`),1)])]),s("div",Ls,[s("span",$s,"NT$"+t(e.price),1),e.originPrice!==0&&e.price<e.originPrice?(o(),l("span",Ps,"NT$"+t(e.originPrice),1)):X("",!0)])])])])])]),_:2},1032,["to"])]))),128))])]),s("div",Ss,[s("div",js,[s("div",{class:m(["border",r.value-1<=0?"text-neutral-400":""])},[s("span",{class:"cursor-pointer px-2",onClick:n[0]||(n[0]=e=>v(r.value-1))},"<")],2),s("ul",Ns,[(o(!0),l(d,null,u((k=i.value)==null?void 0:k.totalPages,e=>(o(),l("li",{key:e},[s("div",{class:m(["border",e===r.value?"bg-primary-4 text-white":""])},[s("span",{class:"px-2",onClick:C=>v(e)},t(e),9,Ms)],2)]))),128))]),s("div",{class:m(["border",r.value+1>=((w=i.value)==null?void 0:w.totalPages)?"text-neutral-400":""])},[s("span",{class:"cursor-pointer px-2",onClick:n[1]||(n[1]=e=>v(r.value+1))},">")],2)])])])])}}});export{Es as default};
