import{d as T,s as V,L as q,r as B,o as H,g as y,a as l,c as n,b as e,h as b,i as k,x as J,J as L,N as $,B as S,k as r,j as t,t as a,F as v,n as g,l as j,u as U}from"./index-4e939a0e.js";import{u as N}from"./order-c4fe20f0.js";const A={class:"container"},G={class:"mb-8 flex gap-x-2"},z={class:"w-3/4"},K=e("h1",{class:"mb-4 text-2xl font-bold"},"訂單資訊",-1),Q=e("span",null,"本網站所有交易皆使用藍新金流服務",-1),W={class:"rounded-lg bg-primary-2 p-4"},X={class:"flex gap-x-4"},Y={class:"w-1/3"},Z=e("label",{for:"name",class:"form-label"},"姓名",-1),ee={class:"w-2/3"},se=e("label",{for:"email",class:"form-label"},"電子郵件",-1),te=e("hr",{class:"my-1"},null,-1),oe={key:0,class:"text-sm"},ae=e("hr",{class:"my-1"},null,-1),le={key:1},ne={class:"flex items-center"},ce={class:"w-1/4 p-2"},ie=["src"],re={class:"w-full p-2"},de={class:"block font-bold"},_e={class:"block text-sm"},ue={class:"block text-sm"},he={class:"flex justify-between"},me={class:"flex"},pe={class:"text-primary-5"},fe={key:0,class:"text-sm text-neutral-900 line-through"},ve={key:2},ge={key:0},xe={class:"flex items-center"},ye={class:"w-1/4 p-2"},be=["src"],ke={class:"w-full p-2"},we={class:"block font-bold"},Ce={class:"block text-sm"},Ie={class:"block text-sm"},Pe={class:"flex justify-between"},Ve={class:"flex"},Be={class:"text-primary-5"},$e={key:0,class:"text-sm text-neutral-900 line-through"},Se=e("hr",{class:"mt-2"},null,-1),je={key:0,class:"w-1/4 rounded bg-primary-1 p-4"},Ne=e("p",{class:""},"總計",-1),Fe={class:"block text-lg font-bold"},Ee={class:"flex justify-between"},De={class:"line-through"},Me={key:0,class:"text-red-500"},Re=e("hr",{class:"my-2"},null,-1),Oe={class:"mb-10"},Te=e("span",{class:"text-lg"},"您可能也會喜歡...",-1),qe={class:"flex gap-x-2"},He=e("div",{class:"mb-1 flex h-20 w-full items-center justify-center bg-neutral-300"},[e("p",{class:"text-center text-lg font-bold"},"course")],-1),Je=e("p",{class:"text-center"},"course name",-1),Le=[He,Je],ze=T({__name:"PaymentSelectionView",setup(Ue){const F=U(),{cart:c,cartCourseIDAry:x,immediateCheckoutCourseInfo:o,isImmediateCheckout:h}=V(q()),{orderInfoGenerate:E}=N(),{paymentInfo:w}=V(N()),m=B(""),p=B("");function D(){c.value.cartItem.forEach(d=>{x.value.push(+d.id)})}function M(){let d,i=[];h.value?(i.push(+o.value.id),d={id:i,name:m.value,email:p.value}):d={id:x.value,name:m.value,email:p.value},E(d).then(f=>{w.value=f.data,localStorage.removeItem("immediateCheckout"),F.replace("/toPaymentSite")})}return H(()=>{localStorage.getItem("immediateCheckout")!=null&&(o.value=JSON.parse(localStorage.getItem("immediateCheckout"))),x.value=[],w.value={},D()}),(d,i)=>{var I,P;const f=y("ErrorMessage"),C=y("VField"),R=y("VForm");return l(),n("div",A,[e("div",G,[e("div",z,[K,Q,e("div",W,[b(R,{ref:"form"},{default:k(({})=>[e("div",X,[e("div",Y,[Z,b(C,{name:"name",rules:"required",label:"姓名"},{default:k(({field:s,errors:_,meta:u})=>[J(e("input",$({id:"name",type:"text",class:"form-control","onUpdate:modelValue":i[0]||(i[0]=O=>m.value=O)},s,{class:{invalid:u.validated&&!!_.length}}),null,16),[[L,m.value]]),u.validated?(l(),S(f,{key:0,class:"invalid-feedback",name:"name"})):r("",!0)]),_:1})]),e("div",ee,[se,b(C,{name:"email",rules:"required",label:"電子郵件",modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=s=>p.value=s)},{default:k(({field:s,errors:_,meta:u})=>[e("input",$({id:"email",type:"text",class:"form-control"},s,{class:{invalid:u.validated&&!!_.length}}),null,16),u.validated?(l(),S(f,{key:0,class:"invalid-feedback",name:"email"})):r("",!0)]),_:1},8,["modelValue"])])])]),_:1},512)]),te,t(c).cartItem.length!=0?(l(),n("span",oe,"購物車中共有"+a(t(c).cartItem.length)+"項課程",1)):r("",!0),ae,t(h)?(l(),n("div",le,[e("div",ne,[e("div",ce,[e("img",{src:(I=t(o))!=null&&I.image_path?(P=t(o))==null?void 0:P.image_path:"https://fakeimg.pl/90x56/B7B7B7/?text=Courses",class:"h-full w-full object-cover",alt:"課程圖片"},null,8,ie)]),e("div",re,[e("span",de,a(t(o).title),1),e("span",_e,a(t(o).provider),1),e("span",ue,a(t(o).category)+"/"+a(t(o).type),1),e("div",he,[e("div",me,[(l(),n(v,null,g(5,s=>e("span",{key:s,class:"material-icons text-sm text-yellow-300"},a(s<=t(o).avgRating?"star":"star_border"),1)),64))]),e("p",pe,[j(a(`$${t(o).price}`)+" ",1),t(o).originPrice!==0&&t(o).price<t(o).originPrice?(l(),n("span",fe,a(`$${t(o).originPrice}`),1)):r("",!0)])])])])])):(l(),n("div",ve,[t(c).cartItem.length!=0?(l(),n("div",ge,[(l(!0),n(v,null,g(t(c).cartItem,s=>(l(),n("div",{key:s.id},[e("div",xe,[e("div",ye,[e("img",{src:s!=null&&s.image_path?s==null?void 0:s.image_path:"https://fakeimg.pl/90x56/B7B7B7/?text=Courses",class:"h-full w-full object-cover",alt:"課程圖片"},null,8,be)]),e("div",ke,[e("span",we,a(s.title),1),e("span",Ce,a(s.provider),1),e("span",Ie,a(s.category)+"/"+a(s.type),1),e("div",Pe,[e("div",Ve,[(l(),n(v,null,g(5,_=>e("span",{key:_,class:"material-icons text-sm text-yellow-300"},a(_<=s.avgRating?"star":"star_border"),1)),64))]),e("p",Be,[j(a(`$${s.price} `)+" ",1),s.originPrice!==0&&s.price<s.originPrice?(l(),n("span",$e,a(`$${s.originPrice}`),1)):r("",!0)])])])]),Se]))),128))])):r("",!0)]))]),t(o).id||t(c).cartItem.length!=0?(l(),n("div",je,[Ne,e("span",Fe,"$"+a(t(h)&&t(o).price?t(o).price:t(c).totalPrice),1),e("div",Ee,[e("span",De,"$"+a(t(h)&&t(o).originPrice?t(o).originPrice:t(c).totalOriginPrice),1),t(c).cartItem.length!=0?(l(),n("span",Me,a(t(c).offPercent)+"%off",1)):r("",!0)]),Re,e("button",{class:"btn-primary block",onClick:i[2]||(i[2]=s=>M())},"確定付款")])):r("",!0)]),e("div",Oe,[Te,e("div",qe,[(l(),n(v,null,g(4,s=>e("div",{key:s,class:"w-1/4"},Le)),64))])])])}}});export{ze as default};
