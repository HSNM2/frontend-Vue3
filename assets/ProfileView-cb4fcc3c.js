import{d as S,m as Y,f as E,s as P,r as d,o as B,g as k,a as C,c as R,b as e,h as s,i as r,N as c,Q as H,l as m,U as T,S as z,v as A}from"./index-50a2709c.js";const L={class:"relative flex h-full flex-col"},Q=e("h1",{class:"mb-6 bg-neutral-50 px-8 py-4 text-lg font-semibold text-neutral-800"},"會員資料",-1),j={class:"flex-1 bg-neutral-50 p-8"},G={class:"col-span-2 lg:col-span-1"},I=e("label",{for:"name",class:"form-label"},[m("姓名 "),e("span",{class:"text-rose-500"},"*")],-1),J={class:"col-span-2 lg:col-span-1"},K=e("label",{for:"nickName",class:"form-label"},[m("暱稱 "),e("span",{class:"text-rose-500"},"*")],-1),O={class:"col-span-2 lg:col-span-1"},W=e("label",{for:"gender",class:"form-label"},[m("性別 "),e("span",{class:"text-rose-500"},"*")],-1),X=e("option",{value:"M"},"男",-1),Z=e("option",{value:"F"},"女",-1),$={class:"col-span-2 lg:col-span-1"},ee=e("label",{for:"birthday",class:"form-label"},[m("生日 "),e("span",{class:"text-rose-500"},"*")],-1),le={class:"relative"},ae=e("span",{class:"material-icons absolute left-3 top-1/2 z-10 -translate-y-2/4 text-neutral-800"},"calendar_today",-1),se=["value"],te={class:"col-span-2 lg:col-span-1"},oe=e("label",{for:"phone",class:"form-label"},[m("聯絡電話 "),e("span",{class:"text-rose-500"},"*")],-1),ne={class:"col-span-2 lg:col-span-1"},de=e("label",{for:"email",class:"form-label"},[m("聯絡信箱 "),e("span",{class:"text-rose-500"},"*")],-1),re={class:"col-span-2"},ie=e("label",{for:"address",class:"form-label"},"地址",-1),ue={class:"col-span-2 text-end"},ce=["disabled"],ve=S({__name:"ProfileView",setup(me){const{updateLoading:D}=Y(),M=E(),{getUser:N}=M,{user:i}=P(M),{showError:U}=A(),F=d(null),p=d(""),v=d(""),f=d("M"),_=d(new Date(new Date().getFullYear()-18,new Date().getMonth(),new Date().getDate())),b=d(""),y=d(""),h=d("");function w(){var u,a,o,n,g,V,x;p.value=((u=i.value)==null?void 0:u.name)||"",v.value=((a=i.value)==null?void 0:a.nickName)||"",f.value=((o=i.value)==null?void 0:o.gender)||"M",_.value=new Date(((n=i.value)==null?void 0:n.birthday)||(new Date().getFullYear()-18,new Date().getMonth(),new Date().getDate())),b.value=((g=i.value)==null?void 0:g.phone)||"",y.value=((V=i.value)==null?void 0:V.email)||"",h.value=((x=i.value)==null?void 0:x.address)||""}B(()=>{w()});function q(){D(!0),T("patch",{name:p.value,nickName:v.value,gender:f.value,birthday:_.value,phone:b.value,address:h.value}).then(u=>(z.fire({icon:"success",title:u.data.message}),N())).then(()=>{w()}).catch(u=>{U(u)}).finally(()=>{D(!1)})}return(u,a)=>{const o=k("VField"),n=k("ErrorMessage"),g=k("VDatePicker"),V=k("VForm");return C(),R("div",L,[Q,e("div",j,[s(V,{ref_key:"profileForm",ref:F,class:"grid grid-cols-2 gap-8",onSubmit:q},{default:r(({meta:x})=>[e("div",G,[I,s(o,{name:"name",rules:"required",type:"text",modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=l=>p.value=l),modelModifiers:{trim:!0},label:"姓名"},{default:r(({field:l,errors:t})=>[e("input",c({id:"name",class:"form-control"},l,{class:{invalid:!!t.length}}),null,16)]),_:1},8,["modelValue"]),s(n,{class:"invalid-feedback",name:"name"})]),e("div",J,[K,s(o,{name:"nickName",type:"text",rules:"required",modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=l=>v.value=l),modelModifiers:{trim:!0},label:"暱稱"},{default:r(({field:l,errors:t})=>[e("input",c({id:"nickName",class:"form-control"},l,{class:{invalid:!!t.length}}),null,16)]),_:1},8,["modelValue"]),s(n,{class:"invalid-feedback",name:"nickName"})]),e("div",O,[W,s(o,{id:"gender",class:"form-control",name:"gender",rules:"required",modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=l=>f.value=l),label:"性別",as:"select"},{default:r(()=>[X,Z]),_:1},8,["modelValue"]),s(n,{class:"mb-3 text-red-800",name:"gender"})]),e("div",$,[ee,s(g,{color:"orange",modelValue:_.value,"onUpdate:modelValue":a[3]||(a[3]=l=>_.value=l),popover:{visibility:"click"},masks:{input:"YYYY-MM-DD"},isRequired:!0,"max-date":new Date},{default:r(({inputValue:l,inputEvents:t})=>[e("div",le,[ae,e("input",c({value:l},H(t,!0),{class:"form-control pl-11"}),null,16,se)])]),_:1},8,["modelValue","max-date"])]),e("div",te,[oe,s(o,{name:"phone",type:"text",rules:"required|numeric|length:10",modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=l=>b.value=l),modelModifiers:{trim:!0},label:"聯絡電話"},{default:r(({field:l,errors:t})=>[e("input",c({id:"phone",class:"form-control"},l,{placeholder:"請以09為開頭",class:{invalid:!!t.length}}),null,16)]),_:1},8,["modelValue"]),s(n,{class:"invalid-feedback",name:"phone"})]),e("div",ne,[de,s(o,{name:"email",type:"text",rules:"required|email",modelValue:y.value,"onUpdate:modelValue":a[5]||(a[5]=l=>y.value=l),modelModifiers:{trim:!0},label:"聯絡信箱"},{default:r(({field:l,errors:t})=>[e("input",c({disabled:"",id:"nickName",class:"form-control"},l,{class:{invalid:!!t.length}}),null,16)]),_:1},8,["modelValue"]),s(n,{class:"invalid-feedback",name:"email"})]),e("div",re,[ie,s(o,{name:"address",type:"text",modelValue:h.value,"onUpdate:modelValue":a[6]||(a[6]=l=>h.value=l),modelModifiers:{trim:!0},label:"地址"},{default:r(({field:l,errors:t})=>[e("input",c({id:"address",class:"form-control"},l,{class:{invalid:!!t.length}}),null,16)]),_:1},8,["modelValue"]),s(n,{class:"invalid-feedback",name:"address"})]),e("div",ue,[e("button",{type:"submit",class:"btn-primary",disabled:!x.valid},"提交",8,ce)])]),_:1},512)])])}}});export{ve as default};
